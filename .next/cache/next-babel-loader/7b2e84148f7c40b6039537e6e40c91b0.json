{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\projek\\\\creatella-react-front\\\\components\\\\List.js\";\nvar __jsx = React.createElement;\nimport React, { useContext, useState, useEffect } from 'react';\nimport ApiContext from '../context/ApiContext';\nimport { Row, Col, Card, CardText, CardBody, CardTitle, FormGroup, CardImg, Input, Pagination, PaginationItem, PaginationLink } from 'reactstrap';\n\nfunction List() {\n  const {\n    list,\n    setlist\n  } = useContext(ApiContext);\n  const {\n    0: listing,\n    1: setlisting\n  } = useState([]);\n  const {\n    0: fetchData,\n    1: setfetchData\n  } = useState(false);\n  const {\n    0: limit,\n    1: setlimit\n  } = useState(1);\n  const {\n    0: stopscroll,\n    1: setstopscroll\n  } = useState(false);\n  const {\n    0: page,\n    1: setpage\n  } = useState(1);\n  const {\n    0: type,\n    1: settype\n  } = useState(null);\n  const {\n    0: randomNumber,\n    1: setrandomNumber\n  } = useState(Math.floor(Math.random() * 1000));\n  useEffect(() => {\n    if (list) {\n      let x = list;\n      x = x.slice(0, 20);\n      setlisting(x);\n    }\n  }, [list]);\n  useEffect(() => {\n    if (!fetchData) return;\n    let x = Math.floor(Math.random() * 1000);\n\n    if (x != randomNumber) {\n      setrandomNumber(x);\n    } else {\n      setrandomNumber(Math.floor(Math.random() * 1000));\n    }\n\n    fetchMoreListItems(20);\n  }, [fetchData]);\n  useEffect(() => {\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  const handleScroll = () => {\n    let d = document.getElementById('getScroll'); // console.log(window.innerHeight + document.documentElement.scrollTop);\n    // console.log(document.documentElement.offsetHeight + 100);\n\n    if (window.innerHeight + document.documentElement.scrollTop >= 100 + document.documentElement.offsetHeight || fetchData) {\n      //set top 100px\n      setfetchData(true);\n    }\n  };\n\n  const fetchMoreListItems = q => {\n    setTimeout(() => {\n      console.log(limit);\n      let l = listing.length;\n      let x = list;\n      let y = q;\n      let z = limit * 20;\n      x = x.slice(z, z + 20);\n      let ads = {\n        random: randomNumber\n      };\n\n      if (x.length == 0) {\n        setstopscroll(true);\n      } else {\n        setlisting(prevState => [...prevState, ads, ...x]);\n        setfetchData(false);\n        setlimit(x => x + 1);\n      }\n\n      ;\n    }, 2000);\n  };\n\n  useEffect(() => {\n    setlisting([]);\n    setlist(type, page);\n  }, [page]);\n\n  const clickType = typex => {\n    let type = typex;\n    settype(type);\n    setlisting([]);\n    setlist(type, page);\n  };\n\n  return __jsx(Row, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, __jsx(Col, {\n    sm: \"12\",\n    xs: \"12\",\n    md: \"12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    style: {\n      float: 'left',\n      marginBottom: '10px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, __jsx(FormGroup, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, __jsx(Input, {\n    type: \"select\",\n    id: \"selectSort\",\n    onChange: e => clickType(e.target.value),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, __jsx(\"option\", {\n    value: null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, \"Select Sort\"), __jsx(\"option\", {\n    value: 'size',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Sort Size\"), __jsx(\"option\", {\n    value: 'price',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Sort Price\"), __jsx(\"option\", {\n    value: 'date',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"Sort Date\")))), __jsx(\"div\", {\n    style: {\n      float: 'right',\n      marginBottom: '10px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, __jsx(Pagination, {\n    \"aria-label\": \"Paging\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, Array.apply(null, Array(9)).map((v, i) => {\n    let x = i + 1;\n    return __jsx(PaginationItem, {\n      key: i,\n      className: page == x ? 'active' : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, __jsx(PaginationLink, {\n      onClick: () => setpage(x),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, x));\n  })))), listing.map((v, i) => {\n    let size = `${v.size}px`;\n    let cents = v.price / 100;\n    cents = `$ ${cents.toFixed(2)}`;\n    let finalDate = null;\n    let oldDate = new Date(v.date);\n    let today = new Date();\n    let weekAgo = new Date();\n    let week = today.getDate() - 7;\n    weekAgo.setDate(week);\n    let last = listing.length + 1;\n\n    if (oldDate.getTime() > weekAgo.getTime() && oldDate.getTime() < today.getTime()) {\n      let diff = (today.getTime() - oldDate.getTime()) / (1000 * 3600 * 24);\n      diff = Math.round(diff);\n      finalDate = `${diff} days ago`;\n    } else {\n      let day = oldDate.getDate();\n      let month = oldDate.getMonth() + 1;\n      let year = oldDate.getFullYear();\n      finalDate = `${day}/${month}/${year}`;\n    }\n\n    return __jsx(Col, {\n      sm: \"6\",\n      xs: \"6\",\n      md: \"4\",\n      key: i,\n      style: {\n        cursor: 'pointer'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, last != i ? __jsx(Card, {\n      style: {\n        height: '200px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, __jsx(CardBody, {\n      style: {\n        padding: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, __jsx(CardTitle, {\n      style: {\n        fontSize: size,\n        lineHeight: '3',\n        textAlign: 'center',\n        letterSpacing: '0',\n        color: '#4d4d4d',\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, v.face), __jsx(CardText, {\n      style: {\n        position: \"absolute\",\n        bottom: '20px',\n        color: '#E01A1A',\n        fontSize: '14px',\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Size: \", size), __jsx(CardText, {\n      style: {\n        position: \"absolute\",\n        bottom: '3px',\n        color: '#E01A1A',\n        fontSize: '14px',\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, \"Price: \", cents), __jsx(CardText, {\n      style: {\n        position: \"absolute\",\n        bottom: '0',\n        color: '#E01A1A',\n        fontSize: '14px',\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"Date: \", finalDate))) : __jsx(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, __jsx(Card, {\n      style: {\n        height: '200px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, __jsx(CardBody, {\n      style: {\n        padding: '10px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, __jsx(CardImg, {\n      top: true,\n      width: \"100%\",\n      height: \"150px\",\n      src: `http://localhost:3001/ads/?r=${v.random}.jpg`,\n      alt: \"Item Image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), __jsx(CardText, {\n      style: {\n        position: \"absolute\",\n        bottom: '20px',\n        color: '#E01A1A',\n        fontSize: '14px',\n        fontWeight: 'bold'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"This is Ads\")))));\n  }), stopscroll == false && fetchData && 'Loading....', listing.length == 0 && 'Loading...');\n}\n\nexport default List;","map":{"version":3,"sources":["C:/wamp64/www/projek/creatella-react-front/components/List.js"],"names":["React","useContext","useState","useEffect","ApiContext","Row","Col","Card","CardText","CardBody","CardTitle","FormGroup","CardImg","Input","Pagination","PaginationItem","PaginationLink","List","list","setlist","listing","setlisting","fetchData","setfetchData","limit","setlimit","stopscroll","setstopscroll","page","setpage","type","settype","randomNumber","setrandomNumber","Math","floor","random","x","slice","fetchMoreListItems","window","addEventListener","handleScroll","removeEventListener","d","document","getElementById","innerHeight","documentElement","scrollTop","offsetHeight","q","setTimeout","console","log","l","length","y","z","ads","prevState","clickType","typex","float","marginBottom","e","target","value","Array","apply","map","v","i","size","cents","price","toFixed","finalDate","oldDate","Date","date","today","weekAgo","week","getDate","setDate","last","getTime","diff","round","day","month","getMonth","year","getFullYear","cursor","height","padding","fontSize","lineHeight","textAlign","letterSpacing","color","fontWeight","face","position","bottom"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from 'react'\r\nimport ApiContext from '../context/ApiContext'\r\nimport {\r\n    Row,\r\n    Col,\r\n    Card, CardText, CardBody,\r\n    CardTitle,\r\n    FormGroup,CardImg, Input, Pagination, PaginationItem, PaginationLink\r\n} from 'reactstrap'\r\n\r\nfunction List() {\r\n    const {list, setlist} = useContext(ApiContext)\r\n    const [listing, setlisting] = useState([]);\r\n    const [fetchData, setfetchData] = useState(false);\r\n    const [limit, setlimit] = useState(1)\r\n    const [stopscroll, setstopscroll] = useState(false)\r\n    const [page, setpage] = useState(1)\r\n    const [type, settype] = useState(null)\r\n    const [randomNumber, setrandomNumber] = useState(Math.floor(Math.random()*1000))\r\n\r\n    useEffect(() => {\r\n        if (list) {\r\n            let x = list;\r\n            x = x.slice(0,20)\r\n            setlisting(x)\r\n        }\r\n    }, [list])\r\n\r\n    useEffect(() => {\r\n        if (!fetchData) return;\r\n        let x = Math.floor(Math.random()*1000)\r\n        if (x != randomNumber) {\r\n            setrandomNumber(x)\r\n        }else{\r\n            setrandomNumber(Math.floor(Math.random()*1000))\r\n        }\r\n        fetchMoreListItems(20);\r\n    }, [fetchData]);\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    }, []);\r\n\r\n    const handleScroll = () => {\r\n        let d = document.getElementById('getScroll');\r\n\r\n        // console.log(window.innerHeight + document.documentElement.scrollTop);\r\n        // console.log(document.documentElement.offsetHeight + 100);\r\n        if (window.innerHeight + document.documentElement.scrollTop >= 100 + document.documentElement.offsetHeight || fetchData){ //set top 100px\r\n            setfetchData(true);\r\n        }\r\n    }\r\n\r\n    const fetchMoreListItems = (q) => {\r\n        setTimeout(() => {\r\n            console.log(limit)\r\n            let l = listing.length;\r\n            let x = list;\r\n            let y = q \r\n            let z = limit * 20\r\n            x = x.slice(z,z + 20)\r\n            let ads = {\r\n                random:randomNumber\r\n            }\r\n            if (x.length == 0){\r\n                setstopscroll(true)\r\n            }else{\r\n                setlisting(prevState => [...prevState,ads,...x]);\r\n                setfetchData(false);\r\n                setlimit((x) => x+1)\r\n            };\r\n            \r\n        }, 2000);\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setlisting([])\r\n        setlist(type, page);\r\n    }, [page])\r\n\r\n    const clickType = (typex) =>{\r\n        let type = typex;\r\n        settype(type)\r\n        setlisting([])\r\n        setlist(type, page);\r\n    }\r\n    return (\r\n        <Row>\r\n            <Col sm=\"12\" xs=\"12\" md=\"12\">\r\n            <div style={{float:'left', marginBottom:'10px'}}>\r\n                <FormGroup>\r\n                    <Input type=\"select\" id=\"selectSort\" onChange={(e)=>clickType(e.target.value)}>\r\n                    <option value={null}>Select Sort</option>\r\n                    <option value={'size'}>Sort Size</option>\r\n                    <option value={'price'}>Sort Price</option>\r\n                    <option value={'date'}>Sort Date</option>\r\n                    </Input>\r\n                </FormGroup>\r\n            </div>\r\n            <div style={{float:'right', marginBottom:'10px'}}>\r\n                <Pagination aria-label=\"Paging\">\r\n                    {\r\n                        Array.apply(null, Array(9)).map((v,i) => {\r\n                            let x = i + 1\r\n                            return(\r\n                                <PaginationItem key={i} className={page == x ? 'active':''}>\r\n                                    <PaginationLink  onClick={()=>setpage(x)}>\r\n                                    {x}\r\n                                    </PaginationLink>\r\n                                </PaginationItem>\r\n                            )\r\n                        })\r\n                    }\r\n                    \r\n                </Pagination>\r\n            </div>\r\n            </Col>\r\n        {   \r\n            listing.map((v,i) => {\r\n                let size = `${v.size}px`;\r\n                let cents = v.price / 100\r\n                cents = `$ ${cents.toFixed(2)}`\r\n                let finalDate = null\r\n                let oldDate = new Date(v.date);\r\n                let today = new Date()\r\n                let weekAgo = new Date()\r\n                let week = today.getDate() - 7 ;\r\n                weekAgo.setDate(week)\r\n                let last = listing.length + 1;\r\n                if (oldDate.getTime() > weekAgo.getTime() && oldDate.getTime() < today.getTime() ) {\r\n                    let diff = ( today.getTime() - oldDate.getTime() ) / (1000 * 3600 * 24);\r\n                    diff = Math.round(diff)\r\n                    finalDate = `${diff} days ago`\r\n                }else{\r\n                    let day = oldDate.getDate();\r\n                    let month = oldDate.getMonth() + 1;\r\n                    let year = oldDate.getFullYear();\r\n\r\n                    finalDate = `${day}/${month}/${year}`\r\n                }\r\n\r\n                \r\n\r\n                return(\r\n                        <Col sm=\"6\" xs=\"6\" md=\"4\" key={i} style={{cursor:'pointer'}} >\r\n                        {\r\n                            last != i ?\r\n                                <Card style={{height:'200px'}} >\r\n                                    <CardBody style={{padding:'10px'}}>\r\n                                        <CardTitle style={{fontSize:size,lineHeight:'3',textAlign:'center',letterSpacing:'0',color:'#4d4d4d', fontWeight:'bold'}}>{v.face}</CardTitle>\r\n                                        <CardText style={{position:\"absolute\",bottom:'20px',color:'#E01A1A',fontSize:'14px', fontWeight:'bold'}}>Size: {size}</CardText>\r\n                                        <CardText style={{position:\"absolute\",bottom:'3px',color:'#E01A1A',fontSize:'14px', fontWeight:'bold'}}>Price: {cents}</CardText>\r\n                                        <CardText style={{position:\"absolute\",bottom:'0',color:'#E01A1A',fontSize:'14px', fontWeight:'bold'}}>Date: {finalDate}</CardText>\r\n                                    </CardBody>\r\n                                </Card> \r\n                            :\r\n                                <React.Fragment>\r\n                                    <Card style={{height:'200px'}} >\r\n                                        <CardBody style={{padding:'10px'}}>\r\n                                            <CardImg top width=\"100%\" height=\"150px\" src={`http://localhost:3001/ads/?r=${v.random}.jpg`} alt=\"Item Image\" />\r\n                                            <CardText style={{position:\"absolute\",bottom:'20px',color:'#E01A1A',fontSize:'14px', fontWeight:'bold'}}>This is Ads</CardText>\r\n                                        </CardBody>\r\n                                    </Card>\r\n                                </React.Fragment>  \r\n                        }\r\n                            \r\n                            \r\n\r\n                        </Col>\r\n                )\r\n            })\r\n        }\r\n        { stopscroll == false && fetchData && 'Loading....' }\r\n        {listing.length == 0 && 'Loading...'}\r\n        </Row>\r\n    )\r\n}\r\n\r\nexport default List\r\n"]},"metadata":{},"sourceType":"module"}